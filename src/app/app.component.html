<app-splash *ngIf="showSplash"></app-splash>

<ion-app *ngIf="!showSplash">
  <ion-menu side="start" menuId="first" contentId="main-content" (ionWillOpen)="loadProfilePhoto()">
    <ion-header>
      <div class="contLogo">
        <img src="assets/immaginiGenerali/favicon.png" class="logo">
        <div>NextPlan</div>
      </div>
    </ion-header>
    <ion-content class="menu-content">
      <ion-list class="cursor">

        <ion-item [routerLink]="firebaseIsLoggedIn ? '/profilo' : '/login'" (click)="closeMenu()">
          <ion-avatar slot="start" *ngIf="firebaseIsLoggedIn">
            <img [src]="getProfilePhoto()" />
          </ion-avatar>
          <ion-icon slot="start" name="person-circle-outline" *ngIf="!firebaseIsLoggedIn"></ion-icon>
          <ion-label>Profilo</ion-label>
        </ion-item>

        <ion-item routerLink="/home" (click)="closeMenu()">
          <ion-icon slot="start" name="home-outline"></ion-icon> <ion-label>Home</ion-label>
        </ion-item>

        <ion-item routerLink="/notizie" (click)="closeMenu()">
          <ion-icon slot="start" name="newspaper-outline"></ion-icon> <ion-label>Notizie</ion-label>
        </ion-item>

        <ion-item routerLink="/diario" (click)="closeMenu()">
          <ion-icon slot="start" name="journal-outline"></ion-icon> <ion-label>Diario</ion-label>
        </ion-item>

        <ion-item routerLink="/lista-utenti" (click)="closeMenu()" *ngIf="firebaseIsLoggedIn">
          <ion-icon slot="start" name="people-outline"></ion-icon> <ion-label>Utenti</ion-label>
        </ion-item>

        <ion-item routerLink="/chat-list" (click)="closeMenu()">
          <ion-icon slot="start" name="chatbubbles-outline"></ion-icon>
          <ion-label>
            Chat
            <ion-icon name="mail-unread-outline" color="danger" *ngIf="totalUnreadMessages > 0"
              class="notification-icon">
            </ion-icon>
          </ion-label>
        </ion-item>


        <ion-item routerLink="/sveglie" (click)="closeMenu()">
          <ion-icon slot="start" name="alarm-outline"></ion-icon> <ion-label>Sveglie</ion-label>
        </ion-item>

        <ion-item routerLink="/progetti" (click)="closeMenu()">
          <ion-icon slot="start" name="folder-open-outline"></ion-icon> <ion-label>Progetti</ion-label>
        </ion-item>
        <ion-item routerLink="/list-task" (click)="closeMenu()">
          <ion-icon slot="start" name="checkmark-done-outline"></ion-icon> <ion-label>Task</ion-label>
        </ion-item>

        <ion-item routerLink="/note" (click)="closeMenu()">
          <ion-icon slot="start" name="book-outline"></ion-icon> <ion-label>Note</ion-label>
        </ion-item>

        <ion-item routerLink="/classifica" (click)="closeMenu()">
          <ion-icon slot="start" name="trophy-outline"></ion-icon> <ion-label>Classifica</ion-label>
        </ion-item>

        <ion-item routerLink="/riconoscimenti" (click)="closeMenu()">
          <ion-icon slot="start" name="ribbon-outline"></ion-icon> <ion-label>Riconoscimenti</ion-label>
        </ion-item>

        <ion-item routerLink="/login" (click)="closeMenu()" *ngIf="!firebaseIsLoggedIn">
          <ion-icon slot="start" name="log-in-outline"></ion-icon> <ion-label>Login</ion-label>
        </ion-item>

        <ion-item *ngIf="firebaseIsLoggedIn" (click)="logout(); closeMenu()">
          <ion-icon slot="start" name="log-out-outline"></ion-icon>
          <ion-label>Logout</ion-label>
        </ion-item>

      </ion-list>
    </ion-content>
  </ion-menu>

  <ion-content id="main-content">
    <ion-header>
      <ion-toolbar>
        <ion-buttons slot="start">
          <ion-menu-button (click)="toggleMenu()"></ion-menu-button>
        </ion-buttons>
        <ion-title class="ff7-title">
          NextPlan
        </ion-title>

        <ion-buttons slot="end">
          <ion-button class="notification-button" (click)="openNotificationsModal()">
            <ion-icon name="notifications-outline" class="notification-icon"></ion-icon>
            <ion-badge *ngIf="totalUnreadNotifications > 0" color="danger" class="notification-badge">{{
              totalUnreadNotifications }}</ion-badge>
          </ion-button>
        </ion-buttons>
      </ion-toolbar>
    </ion-header>
    <router-outlet></router-outlet>
  </ion-content>
</ion-app>
