<ion-header>
  <ion-toolbar class="ff7-toolbar">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/progetti"></ion-back-button>
    </ion-buttons>
    <ion-title>{{ project?.name || 'Dettagli Progetto' }}</ion-title>
    <ion-buttons slot="end" *ngIf="project">
      <ion-button (click)="editProject()">
        <ion-icon slot="icon-only" name="create-outline"></ion-icon>
      </ion-button>
      <ion-button (click)="deleteProject()">
        <ion-icon slot="icon-only" name="trash-outline" color="danger"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ff7-content">
  <div *ngIf="isLoading" class="loading-overlay">
    <ion-spinner name="crescent"></ion-spinner>
    <p>Caricamento progetto...</p>
  </div>

  <div *ngIf="!isLoading && project" class="project-detail-container">
    <ion-card class="ff7-card">
      <ion-card-header>
        <div class="header-details">
          <ion-card-title>{{ project.name }}</ion-card-title>
          <ion-text [color]="getStatusColor(project.status)">
            <ion-card-subtitle>{{ project.status }}</ion-card-subtitle>
          </ion-text>
        </div>
      </ion-card-header>

      <ion-card-content>
        <p class="project-description">{{ project.description }}</p>

        <div class="detail-item" *ngIf="project.dueDate">
          <span>Scadenza:</span>
          <strong>{{ project.dueDate | date:'mediumDate' }}</strong>
        </div>

        <div class="detail-item">
          <span>Progresso:</span>
          <div class="progress-bar-container">
            <div class="progress-bar-fill" [style.width]="project.progress + '%'"></div>
          </div>
          <strong class="progress-text">{{ project.progress }}%</strong>
        </div>

      </ion-card-content>
    </ion-card>

    <ion-list class="ff7-list-tasks">
      <ion-list-header class="ff7-list-header">
        <ion-label>Task Associati</ion-label>
      </ion-list-header>
      <ion-item *ngFor="let task of project.tasks" class="ff7-list-task-item">
        <ion-label>{{ task }}</ion-label>
        <ion-icon slot="end" name="checkmark-done-outline"></ion-icon>
      </ion-item>
    </ion-list>
  </div>

  <div *ngIf="!isLoading && !project" class="no-project-message">
    <p>Progetto non trovato.</p>
  </div>
</ion-content>
